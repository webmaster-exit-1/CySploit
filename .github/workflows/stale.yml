name: Mark Stale Issues and PRs

on:
  schedule:
    - cron: '30 1 * * *'  # Run at 1:30 AM every day
  workflow_dispatch:  # Allow manual triggering

jobs:
  stale:
    runs-on: ubuntu-latest
    
    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v8
        with:
          # Settings for issues
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed in 14 days if no further activity occurs.
            Thank you for your contributions to CySploit!
          close-issue-message: >
            This issue has been automatically closed due to inactivity.
            If you believe this issue is still relevant, please feel free to reopen it
            with additional information.
          
          # Settings for PRs
          days-before-pr-stale: 30
          days-before-pr-close: 14
          stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed in 14 days if no further activity occurs.
            Please review the PR guidelines in CONTRIBUTING.md.
          close-pr-message: >
            This pull request has been automatically closed due to inactivity.
            If you would like to continue working on this PR, please reopen it.
          
          # Labels
          stale-issue-label: 'stale'
          stale-pr-label: 'stale'
          
          # Exempt certain issues/PRs
          exempt-issue-labels: 'security,pinned,enhancement'
          exempt-pr-labels: 'security,pinned,work-in-progress'
          
          # Operations
          operations-per-run: 50
          ascending: true  # Older issues/PRs first
